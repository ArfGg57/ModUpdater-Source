buildscript {
    repositories {
        mavenCentral()
        maven { url = "https://maven.minecraftforge.net/" }
    }
}

apply plugin: 'java'

group = 'com.ArfGg57.modupdater'
version = '2.21'
archivesBaseName = '!!!!!modupdater'

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
    mavenCentral()
    maven { url = 'https://maven.minecraftforge.net/' }
    maven { url = 'https://libraries.minecraft.net' } // <- add this
}

dependencies {
    implementation project(':modupdater-core')
    implementation 'net.minecraft:launchwrapper:1.12'
}

// Build a fat jar by including all compile-time dependencies' contents.
// This jar will include your UpdaterTweaker and the modupdater-core classes and json lib.
jar {
    manifest {
        attributes(
                'Implementation-Title': archivesBaseName,
                'Implementation-Version': version,
                'TweakClass': 'com.ArfGg57.modupdater.tweak.UpdaterTweaker', // used by LaunchWrapper
                'FMLCorePlugin': 'com.ArfGg57.modupdater.coremod.ModUpdaterCoremod',
                'FMLCorePluginContainsFMLMod': 'true'
        )
    }

    from {
        // Unpack and include dependency jars and class files
        configurations.runtimeClasspath.collect { zipTree(it) }
    }

    // Exclude signature files to avoid JAR signature issues
    exclude 'META-INF/*.SF', 'META-INF/*.DSA', 'META-INF/*.RSA'
}
